# loader-win32

Import('env')
senv = env.Clone()

senv['LSYS'] = 'nt'
#senv['LSYS'] = 'linux'

if senv['LSYS'] == 'nt':
    senv.Replace(tools = ['mingw'])
    senv.Replace(CXX  = 'mingw32-g++')
    senv.Replace(LINK = 'mingw32-g++')
    senv.Alias('loader', ['FKernel.exe'])

senv.Append(CPPFLAGS  = '-mconsole -mregparm=0 -Wall -zq -O3 -mtune=i586 -m32 -fpermissive')
senv.Append(LINKFLAGS = '-g0 -s')

loader_src = senv.Glob('*.cpp')
loader_src.extend(senv.Glob('sys' + senv['LSYS'] + '/*.cpp'))

senv.Program('FKernel.exe', loader_src)

