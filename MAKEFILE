#
#  Makefile for IKForth.
#
#  Copyright (C) 1999-2003 Illya Kysil
#

IKForth.img: src\FKernel.exe src\FKernel.img \
             src\*.f src\kernel\*.f src\win32\*.f \
             lib\ansi\*.f lib\~ik\*.f lib\~js\486asm\*.f
      src\FKernel.exe
      copy src\FKernel.exe IKForth.exe

src\FKernel.img: src\image\FKernel.asm src\image\*.inc
      cd  src\image
      tasm32  /z/q/n/la FKernel.asm
      cd  ..\..
      tlink32 /x/aa src\image\FKernel.obj,src\FKernel.img

src\FKernel.exe: src\loader\*.pas src\loader\*.dpr
      cd  src\loader
      dcc32 FKernel.dpr
      cd  ..\..

clean: IKForth.img
      del src\loader\*.dcu
      del src\image\*.obj
      del src\image\FKernel.lst
      del src\FKernel.img
      del src\FKernel.exe
